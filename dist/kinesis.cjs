"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("vue");var T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P="Expected a function",j=0/0,B="[object Symbol]",A=/^\s+|\s+$/g,L=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,W=/^0o[0-7]+$/i,D=parseInt,F=typeof T=="object"&&T&&T.Object===Object&&T,K=typeof self=="object"&&self&&self.Object===Object&&self,N=F||K||Function("return this")(),V=Object.prototype,z=V.toString,H=Math.max,G=Math.min,S=function(){return N.Date.now()};function U(e,n,t){var s,u,a,f,l,i,r=0,c=!1,m=!1,y=!0;if(typeof e!="function")throw new TypeError(P);n=O(n)||0,X(t)&&(c=!!t.leading,m="maxWait"in t,a=m?H(O(t.maxWait)||0,n):a,y="trailing"in t?!!t.trailing:y);function p(d){var h=s,w=u;return s=u=void 0,r=d,f=e.apply(w,h),f}function g(d){return r=d,l=setTimeout(M,n),c?p(d):f}function v(d){var h=d-i,w=d-r,Y=n-h;return m?G(Y,a-w):Y}function b(d){var h=d-i,w=d-r;return i===void 0||h>=n||h<0||m&&w>=a}function M(){var d=S();if(b(d))return x(d);l=setTimeout(M,v(d))}function x(d){return l=void 0,y&&s?p(d):(s=u=void 0,f)}function I(){l!==void 0&&clearTimeout(l),r=0,s=i=u=l=void 0}function k(){return l===void 0?f:x(S())}function E(){var d=S(),h=b(d);if(s=arguments,u=this,i=d,h){if(l===void 0)return g(i);if(m)return l=setTimeout(M,n),p(i)}return l===void 0&&(l=setTimeout(M,n)),f}return E.cancel=I,E.flush=k,E}function q(e,n,t){var s=!0,u=!0;if(typeof e!="function")throw new TypeError(P);return X(t)&&(s="leading"in t?!!t.leading:s,u="trailing"in t?!!t.trailing:u),U(e,n,{leading:s,maxWait:n,trailing:u})}function X(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function J(e){return!!e&&typeof e=="object"}function Q(e){return typeof e=="symbol"||J(e)&&z.call(e)==B}function O(e){if(typeof e=="number")return e;if(Q(e))return j;if(X(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=X(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(A,"");var t=R.test(e);return t||W.test(e)?D(e.slice(2),t?2:8):L.test(e)?j:+e}var Z=q;const _=C(Z),$=(e,n,t)=>t&&e>t?t:n&&e<n?n:e,ee=e=>{const{referencePosition:n,shape:t,cycles:s,strength:u}=e,a=(n.x-t.left)*(Math.PI*2)/t.width,f=(n.y-t.top)*(Math.PI*2)/t.height,l=t.width*Math.sin(a*s),i=t.height*Math.sin(f*s);return{x:l*u/(t.width/2),y:i*u/(t.height/2)}},te=({y:e,x:n,originX:t=50,originY:s=50,strength:u=10,minX:a,minY:f,maxX:l,maxY:i})=>{const r=$((n-t/50)*u,a,l),c=$((e-s/50)*u,f,i);return{x:r,y:c}},ne=e=>({x:e?e.width/2:0,y:e?e.height/2:0}),ie=e=>e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth),re=()=>{try{return/Mobi|Android/i.test(navigator.userAgent)}catch{return!0}},oe=({target:e,event:n})=>{const t=n.clientX,s=n.clientY,u=t-e.left,a=s-e.top,f=ne(e),l=u/f.x,i=a/f.y;return{x:l,y:i,target:e}},ae=o.defineComponent({__name:"KinesisContainer",props:{disabled:{type:Boolean,default:!1},duration:{default:1e3},easing:{default:"cubic-bezier(0.23, 1, 0.32, 1)"},perspective:{default:1e3}},setup(e){const n=o.ref(),t=o.ref({width:0,height:0,top:0,right:0,bottom:0,left:0}),s=o.ref(!1),u=o.ref(!1),a=o.ref({x:1,y:1}),f=o.ref(),l=re(),i=o.computed(()=>({move:{action:(g,v)=>oe({target:g,event:v}),condition:s.value&&!l,type:l?"deviceorientation":null}})),r=()=>{e.disabled||(s.value=!0)},c=()=>{e.disabled||(u.value=!0,s.value=!1)},m=_(g=>{if(e.disabled||!n.value)return;const v=g;!s.value&&!u.value&&r(),t.value=n.value.getBoundingClientRect();const b=ie(t.value),M=i.value.move.condition,x=i.value.move.action;b&&M&&(a.value=x(t.value,v),f.value={x:v.clientX,y:v.clientY})},100),y=()=>{l&&window.addEventListener("deviceorientation",m,!0)},p=()=>{l&&window.removeEventListener("deviceorientation",m,!0)};return o.onMounted(y),o.onBeforeUnmount(p),o.provide("context",o.readonly(o.reactive({duration:e.duration,easing:e.easing,eventData:f,isMoving:s,movement:a,shape:t}))),(g,v)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"container",ref:n,style:o.normalizeStyle(g.perspective?{perspective:`${g.perspective}px`}:void 0),onMousemove:v[0]||(v[0]=(...b)=>o.unref(m)&&o.unref(m)(...b)),onMouseenter:r,onMouseleave:c},[o.renderSlot(g.$slots,"default")],36))}}),se=(e,n,t)=>{const s=(i,r)=>`translate3d(${-i}px, ${-r}px, 0)`,u=(i,r)=>{let c=0;return e.value?e.value==="x"?c=2*i:e.value==="y"&&(c=2*r):c=i+r,`rotate3d(0,0,1,${c}deg)`},a=(i,r,c)=>`rotateX(${-r}deg) rotateY(${i}deg) translate3d(0,0,${c*2}px)`,f=(i,r)=>{const c=Math.sign(n.value)*(Math.abs(i)+Math.abs(r))/10+1;return`scale3d(${t.value==="scaleX"||t.value==="scale"?c:1}, ${t.value==="scaleY"||t.value==="scale"?c:1}, 1)`};return{transformSwitch:(i,r,c,m)=>{switch(i==="scaleX"||i==="scaleY"?"scale":i){case"translate":return s(r,c);case"translate-inv":return s(-r,-c);case"rotate":return u(r,c);case"depth":return a(r,c,m);case"depth-inv":return a(-r,-c,m);case"scale":return f(r,c)}}}},ce=o.defineComponent({__name:"KinesisElement",props:{type:{default:"translate"},transformOrigin:{default:"center"},originX:{default:50},originY:{default:50},strength:{default:10},axis:{default:null},maxX:{default:null},maxY:{default:null},minX:{default:null},minY:{default:null},cycles:{default:0}},setup(e){const n=o.toRef(()=>e.axis),t=o.toRef(()=>e.strength),s=o.toRef(()=>e.type),{transformSwitch:u}=se(n,t,s),a=o.inject("context"),f=o.computed(()=>e.type==="depth"||e.type==="depth-inv"?Math.abs(e.strength):e.strength),l=o.computed(()=>{if(!a||!a.shape||!a.isMoving)return{};let r=0,c=0;const{x:m,y}=e.cycles<1?te({...a.movement,originX:e.originX,originY:e.originY,strength:f.value,minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY}):ee({referencePosition:a.eventData,shape:a.shape,cycles:e.cycles,strength:f.value});return r=e.axis==="y"?0:m,c=e.axis==="x"?0:y,{transform:u(e.type,r,c,e.strength)}}),i=o.computed(()=>({transformOrigin:e.transformOrigin,transitionProperty:"transform",transitionDuration:`${(a==null?void 0:a.duration)??0}ms`,transitionTimingFunction:(a==null?void 0:a.easing)??"linear"}));return(r,c)=>(o.openBlock(),o.createElementBlock("div",{style:o.normalizeStyle({...l.value,...i.value})},[o.renderSlot(r.$slots,"default")],4))}}),le={install(e){e.component("KinesisContainer",ae),e.component("KinesisElement",ce)}};exports.kinesisPlugin=le;
