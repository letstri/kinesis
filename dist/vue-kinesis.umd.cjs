(function(M,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(M=typeof globalThis<"u"?globalThis:M||self,t(M["vue-kinesis"]={},M.Vue))})(this,function(M,t){"use strict";var T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C="Expected a function",P=0/0,R="[object Symbol]",A=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,H=/^0o[0-7]+$/i,p=parseInt,F=typeof T=="object"&&T&&T.Object===Object&&T,V=typeof self=="object"&&self&&self.Object===Object&&self,K=F||V||Function("return this")(),N=Object.prototype,z=N.toString,G=Math.max,U=Math.min,S=function(){return K.Date.now()};function q(e,n,i){var a,l,d,o,f,s,c=0,r=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(C);n=I(n)||0,X(i)&&(r=!!i.leading,u="maxWait"in i,d=u?G(I(i.maxWait)||0,n):d,h="trailing"in i?!!i.trailing:h);function y(m){var w=a,x=l;return a=l=void 0,c=m,o=e.apply(x,w),o}function E(m){return c=m,f=setTimeout(b,n),r?y(m):o}function g(m){var w=m-s,x=m-c,B=n-w;return u?U(B,d-x):B}function v(m){var w=m-s,x=m-c;return s===void 0||w>=n||w<0||u&&x>=d}function b(){var m=S();if(v(m))return j(m);f=setTimeout(b,g(m))}function j(m){return f=void 0,h&&a?y(m):(a=l=void 0,o)}function O(){f!==void 0&&clearTimeout(f),c=0,a=s=l=f=void 0}function de(){return f===void 0?o:j(S())}function $(){var m=S(),w=v(m);if(a=arguments,l=this,s=m,w){if(f===void 0)return E(s);if(u)return f=setTimeout(b,n),y(s)}return f===void 0&&(f=setTimeout(b,n)),o}return $.cancel=O,$.flush=de,$}function J(e,n,i){var a=!0,l=!0;if(typeof e!="function")throw new TypeError(C);return X(i)&&(a="leading"in i?!!i.leading:a,l="trailing"in i?!!i.trailing:l),q(e,n,{leading:a,maxWait:n,trailing:l})}function X(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function Q(e){return!!e&&typeof e=="object"}function Z(e){return typeof e=="symbol"||Q(e)&&z.call(e)==R}function I(e){if(typeof e=="number")return e;if(Z(e))return P;if(X(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=X(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(A,"");var i=L.test(e);return i||H.test(e)?p(e.slice(2),i?2:8):D.test(e)?P:+e}var _=J;const ee=W(_),k=(e,n,i)=>i&&e>i?i:n&&e<n?n:e,te=e=>{const{referencePosition:n,shape:i,event:a,cycles:l,strength:d}=e,o=a==="scroll"?window.innerWidth:i.width,f=a==="scroll"?window.innerHeight:i.height,s=(n.x-i.left)*(Math.PI*2)/o,c=(n.y-i.top)*(Math.PI*2)/f,r=o*Math.sin(s*l),u=f*Math.sin(c*l);return{x:r*d/(o/2),y:u*d/(f/2)}},ne=({y:e,x:n,originX:i=50,originY:a=50,strength:l=10,event:d=null,minX:o,minY:f,maxX:s,maxY:c})=>{const r=k((n-i/50)*l,o,s),u=k((e-(d==="scroll"?-a/2:a)/50)*l,f,c);return{x:r,y:u}},ie=e=>({x:e?e.width/2:0,y:e?e.height/2:0}),oe=e=>e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth),Y=()=>{try{return/Mobi|Android/i.test(navigator.userAgent)}catch{return!0}},re=({target:e,event:n})=>{const i=n.clientX,a=n.clientY,l=i-e.left,d=a-e.top,o=ie(e),f=l/o.x,s=d/o.y;return{x:f,y:s,target:e}},ae=({event:e,target:n})=>{if(e.gamma===null||e.beta===null)return{x:0,y:0,target:n};const i=e.gamma/45,a=e.beta/90;return{x:i,y:a,target:n}},se=e=>{const n=(e.left-window.innerWidth)/(e.width+window.innerWidth),i=(e.top-window.innerHeight)/(e.height+window.innerHeight);return{x:n,y:i,target:e}},ce=t.defineComponent({__name:"KinesisContainer",props:{tag:{default:"div"},event:{default:"move"},disabled:{type:Boolean,default:!1},duration:{default:1e3},easing:{default:"cubic-bezier(0.23, 1, 0.32, 1)"},perspective:{default:1e3}},setup(e){const n=t.ref("div"),i=t.ref(),a=t.ref({width:0,height:0,top:0,right:0,bottom:0,left:0}),l=t.ref(!1),d=t.ref(!1),o=t.ref({x:0,y:0}),f={orientation:"deviceorientation",scroll:"scroll",move:Y()?"deviceorientation":null},s=t.ref();t.watch(()=>e.tag,()=>{n.value=e.tag});const c=t.computed(()=>{var g;return{move:{action:(v,b)=>re({target:v,event:b}),condition:l.value&&!Y(),type:f.move},scroll:{action:v=>se(v),condition:!!((g=a.value)!=null&&g.height),type:f.scroll},orientation:{action:(v,b)=>ae({target:v,event:b}),condition:e.event==="move"&&Y(),type:f.orientation}}}),r=()=>{e.disabled||(l.value=!0)},u=()=>{e.disabled||(d.value=!0,l.value=!1)},h=ee(g=>{if(e.disabled||!i.value)return;const v=g;!l.value&&!d.value&&r(),a.value=i.value.getBoundingClientRect();const b=oe(a.value),j=c.value[e.event].condition,O=c.value[e.event].action;b&&j&&(o.value=O(a.value,v),s.value={x:v.clientX,y:v.clientY})},100),y=()=>{const g=f[e.event];g&&window.addEventListener(g,h,!0)},E=()=>{const g=f[e.event];g&&window.removeEventListener(g,h,!0)};return t.onMounted(()=>{n.value=e.tag}),t.onMounted(y),t.onBeforeUnmount(E),t.provide("context",t.readonly(t.reactive({duration:e.duration,easing:e.easing,event:e.event,eventData:s,isMoving:l,movement:o,shape:a}))),(g,v)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.value),{ref_key:"container",ref:i,style:t.normalizeStyle({perspective:`${g.perspective}px`}),onMousemove:t.unref(h),onMouseenter:r,onMouseleave:u},{default:t.withCtx(()=>[t.renderSlot(g.$slots,"default")]),_:3},40,["style","onMousemove"]))}}),le=(e,n,i)=>{const a=(s,c)=>`translate3d(${-s}px, ${-c}px, 0)`,l=(s,c)=>{let r=0;return e.value?e.value==="x"?r=2*s:e.value==="y"&&(r=2*c):r=s+c,`rotate3d(0,0,1,${r}deg)`},d=(s,c,r)=>`rotateX(${-c}deg) rotateY(${s}deg) translate3d(0,0,${r*2}px)`,o=(s,c)=>{const r=Math.sign(n.value)*(Math.abs(s)+Math.abs(c))/10+1;return`scale3d(${i.value==="scaleX"||i.value==="scale"?r:1}, ${i.value==="scaleY"||i.value==="scale"?r:1}, 1)`};return{transformSwitch:(s,c,r,u)=>{switch(s==="scaleX"||s==="scaleY"?"scale":s){case"translate":return a(c,r);case"translate-inv":return a(-c,-r);case"rotate":return l(c,r);case"depth":return d(c,r,u);case"depth-inv":return d(-c,-r,u);case"scale":return o(c,r)}}}},fe=t.defineComponent({__name:"KinesisElement",props:{tag:{default:"div"},type:{default:"translate"},transformOrigin:{default:"center"},originX:{default:50},originY:{default:50},strength:{default:10},axis:{default:null},maxX:{default:null},maxY:{default:null},minX:{default:null},minY:{default:null},cycles:{default:0}},setup(e){const n=t.toRef(()=>e.axis),i=t.toRef(()=>e.strength),a=t.toRef(()=>e.type),l=t.ref("div");t.watch(()=>e.tag,()=>{l.value=e.tag}),t.onMounted(()=>{l.value=e.tag});const{transformSwitch:d}=le(n,i,a),o=t.inject("context"),f=t.computed(()=>e.type==="depth"||e.type==="depth-inv"?Math.abs(e.strength):e.strength),s=t.computed(()=>{if(!o||!o.shape||!o.isMoving&&o.event==="move")return{};let r=0,u=0;const{x:h,y}=e.cycles<1?ne({...o.movement,originX:e.originX,originY:e.originY,strength:f.value,event:o.event,minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY}):te({referencePosition:o.event==="scroll"?{x:0,y:0}:o.eventData,shape:o.shape,event:o.event,cycles:e.cycles,strength:f.value});return o.event!=="scroll"?(r=e.axis==="y"?0:h,u=e.axis==="x"?0:y):o.event==="scroll"?(r=e.axis==="x"?y:0,u=e.axis==="y"||!e.axis?y:0):e.cycles>0&&(r=e.axis==="x"?h:0,u=e.axis==="y"?y:0),{transform:d(e.type,r,u,e.strength)}}),c=t.computed(()=>({transformOrigin:e.transformOrigin,willChange:"transform",transitionProperty:"transform",transitionDuration:`${(o==null?void 0:o.duration)??0}ms`,transitionTimingFunction:(o==null?void 0:o.easing)??"linear"}));return(r,u)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(l.value),{style:t.normalizeStyle({...s.value,...c.value})},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},8,["style"]))}}),ue={install(e){e.component("KinesisContainer",ce),e.component("KinesisElement",fe)}};M.kinesisPlugin=ue,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
