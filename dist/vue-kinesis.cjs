"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("vue");var T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k="Expected a function",C=0/0,R="[object Symbol]",A=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,H=/^0o[0-7]+$/i,F=parseInt,K=typeof T=="object"&&T&&T.Object===Object&&T,N=typeof self=="object"&&self&&self.Object===Object&&self,V=K||N||Function("return this")(),z=Object.prototype,G=z.toString,U=Math.max,q=Math.min,E=function(){return V.Date.now()};function J(e,t,n){var a,s,d,o,u,l,c=0,r=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(k);t=P(t)||0,X(n)&&(r=!!n.leading,f="maxWait"in n,d=f?U(P(n.maxWait)||0,t):d,h="trailing"in n?!!n.trailing:h);function y(m){var w=a,M=s;return a=s=void 0,c=m,o=e.apply(M,w),o}function S(m){return c=m,u=setTimeout(b,t),r?y(m):o}function v(m){var w=m-l,M=m-c,$=t-w;return f?q($,d-M):$}function g(m){var w=m-l,M=m-c;return l===void 0||w>=t||w<0||f&&M>=d}function b(){var m=E();if(g(m))return x(m);u=setTimeout(b,v(m))}function x(m){return u=void 0,h&&a?y(m):(a=s=void 0,o)}function Y(){u!==void 0&&clearTimeout(u),c=0,a=l=s=u=void 0}function B(){return u===void 0?o:x(E())}function j(){var m=E(),w=g(m);if(a=arguments,s=this,l=m,w){if(u===void 0)return S(l);if(f)return u=setTimeout(b,t),y(l)}return u===void 0&&(u=setTimeout(b,t)),o}return j.cancel=Y,j.flush=B,j}function Q(e,t,n){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(k);return X(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),J(e,t,{leading:a,maxWait:t,trailing:s})}function X(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Z(e){return!!e&&typeof e=="object"}function p(e){return typeof e=="symbol"||Z(e)&&G.call(e)==R}function P(e){if(typeof e=="number")return e;if(p(e))return C;if(X(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=X(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(A,"");var n=L.test(e);return n||H.test(e)?F(e.slice(2),n?2:8):D.test(e)?C:+e}var _=Q;const ee=W(_),I=(e,t,n)=>n&&e>n?n:t&&e<t?t:e,te=e=>{const{referencePosition:t,shape:n,event:a,cycles:s,strength:d}=e,o=a==="scroll"?window.innerWidth:n.width,u=a==="scroll"?window.innerHeight:n.height,l=(t.x-n.left)*(Math.PI*2)/o,c=(t.y-n.top)*(Math.PI*2)/u,r=o*Math.sin(l*s),f=u*Math.sin(c*s);return{x:r*d/(o/2),y:f*d/(u/2)}},ne=({y:e,x:t,originX:n=50,originY:a=50,strength:s=10,event:d=null,minX:o,minY:u,maxX:l,maxY:c})=>{const r=I((t-n/50)*s,o,l),f=I((e-(d==="scroll"?-a/2:a)/50)*s,u,c);return{x:r,y:f}},ie=e=>({x:e?e.width/2:0,y:e?e.height/2:0}),oe=e=>e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth),O=()=>{try{return/Mobi|Android/i.test(navigator.userAgent)}catch{return!0}},re=({target:e,event:t})=>{const n=t.clientX,a=t.clientY,s=n-e.left,d=a-e.top,o=ie(e),u=s/o.x,l=d/o.y;return{x:u,y:l,target:e}},ae=({event:e,target:t})=>{if(e.gamma===null||e.beta===null)return{x:0,y:0,target:t};const n=e.gamma/45,a=e.beta/90;return{x:n,y:a,target:t}},le=e=>{const t=(e.left-window.innerWidth)/(e.width+window.innerWidth),n=(e.top-window.innerHeight)/(e.height+window.innerHeight);return{x:t,y:n,target:e}},ce=i.defineComponent({__name:"KinesisContainer",props:{tag:{default:"div"},event:{default:"move"},disabled:{type:Boolean,default:!1},duration:{default:1e3},easing:{default:"cubic-bezier(0.23, 1, 0.32, 1)"},perspective:{default:1e3}},setup(e){const t=i.ref("div"),n=i.ref(),a=i.ref({width:0,height:0,top:0,right:0,bottom:0,left:0}),s=i.ref(!1),d=i.ref(!1),o=i.ref({x:0,y:0}),u={orientation:"deviceorientation",scroll:"scroll",move:O()?"deviceorientation":null},l=i.ref();i.watch(()=>e.tag,()=>{t.value=e.tag});const c=i.computed(()=>{var v;return{move:{action:(g,b)=>re({target:g,event:b}),condition:s.value&&!O(),type:u.move},scroll:{action:g=>le(g),condition:!!((v=a.value)!=null&&v.height),type:u.scroll},orientation:{action:(g,b)=>ae({target:g,event:b}),condition:e.event==="move"&&O(),type:u.orientation}}}),r=()=>{e.disabled||(s.value=!0)},f=()=>{e.disabled||(d.value=!0,s.value=!1)},h=ee(v=>{if(e.disabled||!n.value)return;const g=v;!s.value&&!d.value&&r(),a.value=n.value.getBoundingClientRect();const b=oe(a.value),x=c.value[e.event].condition,Y=c.value[e.event].action;b&&x&&(o.value=Y(a.value,g),l.value={x:g.clientX,y:g.clientY})},100),y=()=>{const v=u[e.event];v&&window.addEventListener(v,h,!0)},S=()=>{const v=u[e.event];v&&window.removeEventListener(v,h,!0)};return i.onMounted(()=>{t.value=e.tag}),i.onMounted(y),i.onBeforeUnmount(S),i.provide("context",i.readonly(i.reactive({duration:e.duration,easing:e.easing,event:e.event,eventData:l,isMoving:s,movement:o,shape:a}))),(v,g)=>(i.openBlock(),i.createBlock(i.resolveDynamicComponent(t.value),{ref_key:"container",ref:n,style:i.normalizeStyle({perspective:`${v.perspective}px`}),onMousemove:i.unref(h),onMouseenter:r,onMouseleave:f},{default:i.withCtx(()=>[i.renderSlot(v.$slots,"default")]),_:3},40,["style","onMousemove"]))}}),se=(e,t,n)=>{const a=(l,c)=>`translate3d(${-l}px, ${-c}px, 0)`,s=(l,c)=>{let r=0;return e.value?e.value==="x"?r=2*l:e.value==="y"&&(r=2*c):r=l+c,`rotate3d(0,0,1,${r}deg)`},d=(l,c,r)=>`rotateX(${-c}deg) rotateY(${l}deg) translate3d(0,0,${r*2}px)`,o=(l,c)=>{const r=Math.sign(t.value)*(Math.abs(l)+Math.abs(c))/10+1;return`scale3d(${n.value==="scaleX"||n.value==="scale"?r:1}, ${n.value==="scaleY"||n.value==="scale"?r:1}, 1)`};return{transformSwitch:(l,c,r,f)=>{switch(l==="scaleX"||l==="scaleY"?"scale":l){case"translate":return a(c,r);case"translate-inv":return a(-c,-r);case"rotate":return s(c,r);case"depth":return d(c,r,f);case"depth-inv":return d(-c,-r,f);case"scale":return o(c,r)}}}},ue=i.defineComponent({__name:"KinesisElement",props:{tag:{default:"div"},type:{default:"translate"},transformOrigin:{default:"center"},originX:{default:50},originY:{default:50},strength:{default:10},axis:{default:null},maxX:{default:null},maxY:{default:null},minX:{default:null},minY:{default:null},cycles:{default:0}},setup(e){const t=i.toRef(()=>e.axis),n=i.toRef(()=>e.strength),a=i.toRef(()=>e.type),s=i.ref("div");i.watch(()=>e.tag,()=>{s.value=e.tag}),i.onMounted(()=>{s.value=e.tag});const{transformSwitch:d}=se(t,n,a),o=i.inject("context"),u=i.computed(()=>e.type==="depth"||e.type==="depth-inv"?Math.abs(e.strength):e.strength),l=i.computed(()=>{if(!o||!o.shape||!o.isMoving&&o.event==="move")return{};let r=0,f=0;const{x:h,y}=e.cycles<1?ne({...o.movement,originX:e.originX,originY:e.originY,strength:u.value,event:o.event,minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY}):te({referencePosition:o.event==="scroll"?{x:0,y:0}:o.eventData,shape:o.shape,event:o.event,cycles:e.cycles,strength:u.value});return o.event!=="scroll"?(r=e.axis==="y"?0:h,f=e.axis==="x"?0:y):o.event==="scroll"?(r=e.axis==="x"?y:0,f=e.axis==="y"||!e.axis?y:0):e.cycles>0&&(r=e.axis==="x"?h:0,f=e.axis==="y"?y:0),{transform:d(e.type,r,f,e.strength)}}),c=i.computed(()=>({transformOrigin:e.transformOrigin,willChange:"transform",transitionProperty:"transform",transitionDuration:`${(o==null?void 0:o.duration)??0}ms`,transitionTimingFunction:(o==null?void 0:o.easing)??"linear"}));return(r,f)=>(i.openBlock(),i.createBlock(i.resolveDynamicComponent(s.value),{style:i.normalizeStyle({...l.value,...c.value})},{default:i.withCtx(()=>[i.renderSlot(r.$slots,"default")]),_:3},8,["style"]))}}),fe={install(e){e.component("KinesisContainer",ce),e.component("KinesisElement",ue)}};exports.kinesisPlugin=fe;
